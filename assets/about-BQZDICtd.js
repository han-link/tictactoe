import"./main-8ukwXcvQ.js";class o{constructor(){this.resetBoard()}resetBoard(){this.board=Array(3).fill(null).map(()=>Array(3).fill(null))}updateCell(t,e,s){this.board[e][t]=s.id}isCellOccupied(t,e){return this.board[e][t]!==null}checkWinner(){const t=[];for(let e=0;e<3;e++)t.push(this.board[e]),t.push(this.board.map(s=>s[e]));t.push([0,1,2].map(e=>this.board[e][e])),t.push([0,1,2].map(e=>this.board[e][2-e]));for(const e of t){const s=e.reduce((r,n)=>r+n,0);if(s===3)return 1;if(s===30)return 10}return null}}class a{constructor(t,e,s){this.id=t,this.name=e,this.cssClass=s}}class l{constructor(){this.board=new o,this.player1=new a(1,sessionStorage.getItem("player1"),"donut"),this.player2=new a(10,sessionStorage.getItem("player2"),"burger"),this.currentPlayer=this.player1,this.buttonList=document.querySelectorAll(".playgroundButton"),this.playerInfo=document.getElementById("playerInfo"),this.winnerDisplay=document.getElementById("win"),this.checkSessionStorage(),this.updatePlayerInfo(),this.initButtons(),document.querySelector(".newGame").addEventListener("click",this.createNewGame),document.querySelector(".reset").addEventListener("click",()=>this.resetGame())}checkSessionStorage(){(!this.player1.name||!this.player2.name)&&history.back()}updatePlayerInfo(){this.playerInfo.innerHTML=`${this.currentPlayer.name} ist am Zug`}handleMove(t){const e=t.currentTarget,s=parseInt(e.getAttribute("data-x")),r=parseInt(e.getAttribute("data-y"));if(this.board.isCellOccupied(s,r))return;this.board.updateCell(s,r,this.currentPlayer);const n=this.board.checkWinner();if(n){this.showWinner(n),this.disableButtons();return}this.switchPlayer(),this.updatePlayerInfo()}switchPlayer(){this.currentPlayer=this.currentPlayer===this.player1?this.player2:this.player1}showWinner(t){const e=t===1?this.player1:this.player2;this.winnerDisplay.style.display="block",this.winnerDisplay.innerHTML=`${e.name} hat gewonnen`,document.querySelectorAll(`.${e.cssClass}`).forEach(s=>s.classList.add("fall-out"))}disableButtons(){this.buttonList.forEach(t=>{t.removeEventListener("click",this.boundHandleMove)})}initButtons(){this.boundHandleMove=this.handleMove.bind(this),this.buttonList.forEach(t=>{t.addEventListener("click",this.boundHandleMove)})}resetGame(){this.board.resetBoard(),this.buttonList.forEach(t=>{t.classList.remove("donut","burger","fall-out")}),this.currentPlayer=this.player1,this.updatePlayerInfo(),this.winnerDisplay.style.display="none",this.initButtons()}createNewGame(){window.location.href=window.location.origin+"/"}}document.addEventListener("DOMContentLoaded",()=>{new l});
